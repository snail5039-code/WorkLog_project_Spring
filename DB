DROP DATABASE workLog_project;
CREATE DATABASE workLog_project;

USE workLog_project;

CREATE TABLE workLog(
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , title VARCHAR(100) NOT NULL
    , mainContent TEXT NOT NULL
    , sideContent TEXT 
    , memberId INT UNSIGNED NOT NULL
    , boardId INT UNSIGNED NOT NULL  
);
ALTER TABLE workLog ADD COLUMN documentType VARCHAR(10) NOT NULL DEFAULT '6' AFTER sideContent;
ALTER TABLE workLog ADD COLUMN summaryContent TEXT NOT NULL;
ALTER TABLE workLog MODIFY documentType TEXT;
ALTER TABLE workLog ADD COLUMN docxPath VARCHAR(255) NULL AFTER sideContent;
ALTER TABLE workLog ADD COLUMN templateId VARCHAR(20) NOT NULL DEFAULT 'TPL2';
ALTER TABLE workLog DROP COLUMN templateId;
CREATE TABLE `member`(
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , loginId VARCHAR(50) UNIQUE NOT NULL
    , loginPw VARCHAR(100) NOT NULL
    , `name` VARCHAR(20) NOT NULL
    , email VARCHAR(100) UNIQUE
    , sex VARCHAR(20) NOT NULL
    , address VARCHAR(100) NOT NULL
);

CREATE TABLE board (
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT 
    , boardName VARCHAR(30) NOT NULL  
);

CREATE TABLE fileAttach(
	id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT COMMENT '첨부파일 고유 번호'
	, regDate DATETIME NOT NULL
	, updateDate DATETIME NOT NULL
	, workLogId INT UNSIGNED NOT NULL
	, fileName VARCHAR(50) NOT NULL
	, filePath VARCHAR(150) NOT NULL
	, fileSize BIGINT NOT NULL
);

ALTER TABLE fileAttach MODIFY COLUMN fileSize BIGINT UNSIGNED NOT NULL;
        
 
CREATE TABLE handoverLog(
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME DEFAULT CURRENT_TIMESTAMP
    , updateDate DATETIME NULL
    , memberId INT UNSIGNED NOT NULL
    , writerName VARCHAR(50) NOT NULL
    , title VARCHAR(200) NOT NULL
    , toName VARCHAR(50) NOT NULL
    , toJob VARCHAR(100) NOT NULL
    , fromJob VARCHAR(100) NOT NULL
    , fromDate DATE NULL
    , toDate DATE NULL
    , content TEXT NOT NULL
);       
    
        
INSERT INTO workLog
    (regDate, updateDate, title, mainContent, sideContent, summaryContent, memberId, templateId, boardId)
VALUES
    (NOW(), NOW(), '공지 테스트 1', '공지 내용입니다', '보조내용 없음', '{}', 1, 'TPL1', 1),
    (NOW(), NOW(), '자유글 테스트 1', '자유게시판 내용입니다', '보조내용 없음', '{}', 1, 'TPL1', 2),
    (NOW(), NOW(), '질문글 테스트 1', '질문 내용입니다', '보조내용 없음', '{}', 1, 'TPL1', 3),
    (NOW(), NOW(), '일일 업무일지 1', '일일 업무 내용입니다', '보조내용 없음', '{}', 1, 'TPL1', 4),
    (NOW(), NOW(), '주간 업무일지 1', '주간 업무 내용입니다', '보조내용 없음', '{}', 1, 'TPL1', 5),
    (NOW(), NOW(), '월간 업무일지 1', '월간 업무 내용입니다', '보조내용 없음', '{}', 1, 'TPL1', 6),
    (NOW(), NOW(), '인수인계 테스트 1', '인수인계 내용입니다', '보조내용 없음', '{}', 1, 'TPL1', 7);

DELETE FROM template;                

SELECT *
    FROM template;       

SELECT *
    FROM workLog;
    
SELECT *
    FROM `member`;
    
SELECT *
	FROM fileAttach;