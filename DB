CREATE DATABASE workLog_project;

USE workLog_project;

CREATE TABLE workLog(
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , title VARCHAR(100) NOT NULL
    , mainContent TEXT NOT NULL
    , sideContent TEXT 
    , memberId INT UNSIGNED NOT NULL
    , boardId INT UNSIGNED NOT NULL  
);

ALTER TABLE workLog ADD COLUMN summaryContent TEXT NOT NULL;

CREATE TABLE `member`(
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT
    , regDate DATETIME NOT NULL
    , updateDate DATETIME NOT NULL
    , loginId VARCHAR(50) UNIQUE NOT NULL
    , loginPw VARCHAR(100) NOT NULL
    , `name` VARCHAR(20) NOT NULL
    , email VARCHAR(100) UNIQUE
    , sex VARCHAR(20) NOT NULL
    , address VARCHAR(100) NOT NULL
);

CREATE TABLE board (
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT 
    , boardName VARCHAR(30) NOT NULL  
);

CREATE TABLE fileAttach(
	id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT COMMENT '첨부파일 고유 번호'
	, regDate DATETIME NOT NULL
	, updateDate DATETIME NOT NULL
	, workLogId INT UNSIGNED NOT NULL
	, fileName VARCHAR(50) NOT NULL
	, filePath VARCHAR(150) NOT NULL
	, fileSize BIGINT NOT NULL
);

ALTER TABLE fileAttach MODIFY COLUMN fileSize BIGINT UNSIGNED NOT NULL;


CREATE TABLE template (
    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT
    , templateFileName VARCHAR(255) NOT NULL
    , jsonKey VARCHAR(100) NOT NULL
    , placeholder VARCHAR(100) NOT NULL
);

INSERT INTO template(templateFileName, jsonKey, placeholder)
VALUES('업무일지양식1.docx', 'report_date_info', 'TPL1_DATE')
        ,('업무일지양식1.docx', 'mon_task_today', 'TPL1_MON_TASK_TODAY')
        ,('업무일지양식1.docx', 'mon_task_next', 'TPL1_MON_TASK_NEXT')
        ,('업무일지양식1.docx', 'tue_task_today', 'TPL1_TUE_TASK_TODAY')
        ,('업무일지양식1.docx', 'tue_task_next', 'TPL1_TUE_TASK_NEXT')
        ,('업무일지양식1.docx', 'wed_task_today', 'TPL1_WED_TASK_TODAY')
        ,('업무일지양식1.docx', 'wed_task_next', 'TPL1_WED_TASK_NEXT')
        ,('업무일지양식1.docx', 'thu_task_today', 'TPL1_THU_TASK_TODAY')
        ,('업무일지양식1.docx', 'thu_task_next', 'TPL1_THU_TASK_NEXT')
        ,('업무일지양식1.docx', 'fri_task_today', 'TPL1_FRI_TASK_TODAY')
        ,('업무일지양식1.docx', 'fri_task_next', 'TPL1_FRI_TASK_NEXT')
        ,('업무일지양식1.docx', 'sat_task_today', 'TPL1_SAT_TASK_TODAY')
        ,('업무일지양식1.docx', 'sat_task_next', 'TPL1_SAT_TASK_NEXT')
        ,('업무일지양식1.docx', 'suggestions', 'TPL1_SUGGESTIONS');

INSERT INTO template(templateFileName, jsonKey, placeholder)
VALUES('업무일지양식3.docx', 'author', 'TPL3_AUTHOR')
        ,('업무일지양식3.docx', 'date', 'TPL3_DATE')
        ,('업무일지양식3.docx', 'content', 'TPL3_CONTENT')
        ,('업무일지양식3.docx', 'note', 'TPL3_NOTE')
        ,('업무일지양식3.docx', 'summary', 'TPL3_SUMMARY');

INSERT INTO template(templateFileName, jsonKey, placeholder)
VALUES('업무일지양식4.docx', 'report_id', 'TPL4_REPORT_ID')
        ,('업무일지양식4.docx', 'date', 'TPL4_DATE')
        ,('업무일지양식4.docx', 'department', 'TPL4_DEPT')
        ,('업무일지양식4.docx', 'author', 'TPL4_AUTHOR')
        ,('업무일지양식4.docx', 'today_tasks_list', 'TPL4_TODAY_TASKS')
        ,('업무일지양식4.docx', 'next_plan_list', 'TPL4_NEXT_PLAN')
        ,('업무일지양식4.docx', 'note', 'TPL4_NOTE');

INSERT INTO template(templateFileName, jsonKey, placeholder)
VALUES('업무일지양식5.docx', 'position', 'TPL5_POSITION')
        ,('업무일지양식5.docx', 'author', 'TPL5_AUTHOR')
        ,('업무일지양식5.docx', 'date', 'TPL5_DATE');

INSERT INTO template(templateFileName, jsonKey, placeholder)
VALUES('업무일지양식6.docx', 'team', 'TPL6_TEAM')
        ,('업무일지양식6.docx', 'author', 'TPL6_AUTHOR')
        ,('업무일지양식6.docx', 'date', 'TPL6_DATE')
        ,('업무일지양식6.docx', 'today_issue', 'TPL6_TODAY_ISSUE')
        ,('업무일지양식6.docx', 'today_tasks', 'TPL6_TODAY_TASKS')
        ,('업무일지양식6.docx', 'details', 'TPL6_DETAILS')
        ,('업무일지양식6.docx', 'next_plan', 'TPL6_NEXT_PLAN')
        ,('업무일지양식6.docx', 'etc', 'TPL6_ETC');

INSERT INTO template(templateFileName, jsonKey, placeholder)
VALUES('업무일지양식7.docx', 'project_name', 'TPL7_PROJECT_NAME')        
        ,('업무일지양식7.docx', 'task_note', 'TPL7_TASK_NOTE')        
        ,('업무일지양식7.docx', 'today_work_detail', 'TPL7_TODAY_WORK_DETAIL')        
        ,('업무일지양식7.docx', 'personnel_count', 'TPL7_PERSONNEL_COUNT')        
        ,('업무일지양식7.docx', 'equipment_detail', 'TPL7_EQUIPMENT_DETAIL')        
        ,('업무일지양식7.docx', 'material_detail', 'TPL7_MATERIAL_DETAIL')        
        ,('업무일지양식7.docx', 'other_notes', 'TPL7_OTHER_NOTES')        
        ,('업무일지양식7.docx', 'next_plan_detail', 'TPL7_NEXT_PLAN_DETAIL')        
        ,('업무일지양식7.docx', 'next_personnel_plan', 'TPL7_NEXT_PERSONNEL_PLAN')        
        ,('업무일지양식7.docx', 'next_equipment_plan', 'TPL7_NEXT_EQUIPMENT_PLAN')  
        ,('업무일지양식7.docx', 'next_material_plan', 'TPL7_NEXT_MATERIAL_PLAN')
        ,('업무일지양식7.docx', 'next_other_notes', 'TPL7_NEXT_OTHER_NOTES');         
                

SELECT *
    FROM template;       

DELETE FROM template;

TRUNCATE TABLE workLog;

TRUNCATE TABLE fileAttach;

SELECT *
    FROM workLog;
    
SELECT *
    FROM `member`;
    
SELECT *
	FROM fileAttach;